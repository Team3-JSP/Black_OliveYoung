<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.blackolive.app.mapper.order.OrderMapper">

	<select id="selectUserDelivery" resultType="DeliveryDTO">	
		SELECT delivery_id, delivery_name
		FROM delivery
		WHERE user_id = #{userId}
		ORDER BY default_delivery
	</select>
	
	<select id="selectOneUserDelivery" resultType="DeliveryDTO">
		SELECT *
		FROM delivery
		WHERE user_id = #{userId} AND default_delivery = 1
	</select>
	
	<select id="selectOneDelivery" resultType="DeliveryDTO">
		SELECT *
		FROM delivery
		WHERE delivery_id = #{deliveryId}
	</select>
	
	<select id="selectUserCoupon" resultType="CouponDTO">
		SELECT *
		FROM coupon c JOIN user_coupon uc ON c.coupon_id = uc.coupon_id
		WHERE user_id = #{userId}
	</select>

	<select id="selectOrderProducts" resultType="OrderProductContainer">
		SELECT *
		FROM productcontainer
		WHERE product_id IN
		<foreach item="orderProducts" collection="orderProducts" open="(" close=")" separator=",">
			#{orderProducts}
		</foreach>
	</select>

</mapper>